<?php

phpinfo();
/*
error_reporting(E_ALL);
ini_set('display_errors', 'on');
$string = '[url=https://tes.bestt.ru?main=12d|class=test]asd[/url]';

$string = preg_replace_callback('~\\[url=(https?://(www.)?[0-9a-zа-яё\.-]+\.[0-9a-zа-яё]{2,6}[0-9a-zа-яё/\?\.\~&amp;_=/%-:#]*)(\|(class|id)=([a-z0-9_-]+))?\\](.+?)\\[/url\\]~sui', 'url_replace_del', $string);

function url_replace_del($a)
{
    var_dump($a);
}

*/